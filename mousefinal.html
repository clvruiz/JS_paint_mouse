<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Dibujando con el mouse</title>
  </head>
  <body>
    <canvas width="300" height="300" id="area_de_dibujo"></canvas>
    <p>Mueve el cursor y mant√©n presionado <br> el click izquierdo para dibujar</p>
    <script>
    alert("Hola \nJose!");
    var cuadrito = document.getElementById("area_de_dibujo");
    var papel = cuadrito.getContext("2d");

    var mouse = false;


    var x;
    var y;

    //cuadrito.addEventListener ("click", getPosition);
    document.addEventListener ("mousedown", activateDraw);
    document.addEventListener ("mouseup", deactivateDraw);
    document.addEventListener ("mousemove", mouseMovement);

    function dibujarLinea(color, xinicial, yinicial, xfinal, yfinal, lienzo)
    {
      lienzo.beginPath();
      lienzo.strokeStyle = color;
      lienzo.lineWidth = 3;
      lienzo.moveTo(xinicial, yinicial);
      lienzo.lineTo(xfinal, yfinal);
      lienzo.stroke();
      lienzo.closePath();
    }

    //function getPosition(e)
    //{
      //x = e.clientX;
      //y = e.clientY;
      //console.log (e);
    //}

    function activateDraw (e)
    {
      mouse = true;
      x = e.clientX - 7;
      y = e.clientY - 6;
      dibujarLinea ("grey", x, y, x+1, y+1, papel);
    }



    function mouseMovement (e)
    {
     if (mouse == true)
      {
        dibujarLinea ("green", x, y, x + e.movementX, y + e.movementY, papel);
        x = x + e.movementX;
        y = y + e.movementY;
      }
    }

    function deactivateDraw (e)
    {
      mouse = false;
    }

    function dibujarLinea(color, xinicial, yinicial, xfinal, yfinal, lienzo)
    {
        lienzo.beginPath();
        lienzo.strokeStyle = color;
        lienzo.lineWidth = 3;
        lienzo.moveTo(xinicial, yinicial);
        lienzo.lineTo(xfinal, yfinal);
        lienzo.stroke();
        lienzo.closePath();
    }

    </script>
  </body>
</html>
